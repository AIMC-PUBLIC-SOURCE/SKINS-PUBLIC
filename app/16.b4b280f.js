(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{126:function(e,a,t){"use strict";var l=t(0),n=t.n(l),c=t(1),r=t(127),i=t.n(r);a.a=e=>{var a;const t=Object(l.useRef)(null);return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"select-file"},Object(c.a)("skinlib.upload.select-file")),n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"custom-file"},n.a.createElement("input",{type:"file",className:"custom-file-input",id:"select-file",accept:e.accept,title:Object(c.a)("skinlib.upload.select-file"),ref:t,onChange:e.onChange}),n.a.createElement("label",{className:`custom-file-label ${i.a.label}`},null===(a=e.file)||void 0===a?void 0:a.name)),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{className:"btn btn-default",onClick:()=>{t.current.click()}},Object(c.a)("skinlib.upload.select-file")))))}},127:function(e,a,t){var l=t(15),n=t(128);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var c={insert:"head",singleton:!1},r=(l(e.i,n,c),n.locals?n.locals:{});e.exports=r},128:function(e,a,t){"use strict";t.r(a);var l=t(11),n=t.n(l)()(!1);n.push([e.i,".label__3djMO::after{display:none}",""]),n.locals={label:"label__3djMO"},a.default=n},379:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),c=t(4),r=t.n(c),i=t(51),s=t(1);function o(e){const[a,t]=Object(l.useState)({});return Object(l.useEffect)(()=>{t(blessing.extra[e])},[]),a}var m=t(7),u=t(3);function d(e,a,t,l,n){for(var c=e.getImageData(a,t,l,n),r=0;r<l;r++)for(var i=0;i<n;i++){var s=4*(r+i*l);if(255!==c.data[s+3])return!0}return!1}function p(e){return e/64}function b(e,a){var t=p(a),l=function(a,l,n,c,r,i,s){return function(e,a,t,l,n,c,r,i){var s=e.getImageData(a,t,l,n);if(i)for(var o=0;o<n;o++)for(var m=0;m<l/2;m++){var u=4*(m+o*l),d=4*(l-m-1+o*l),p=s.data[u],b=s.data[u+1],f=s.data[u+2],v=s.data[u+3],h=s.data[d],g=s.data[d+1],E=s.data[d+2],w=s.data[d+3];s.data[u]=h,s.data[u+1]=g,s.data[u+2]=E,s.data[u+3]=w,s.data[d]=p,s.data[d+1]=b,s.data[d+2]=f,s.data[d+3]=v}e.putImageData(s,c,r)}(e,a*t,l*t,n*t,c*t,r*t,i*t,s)};!function(e,a){if(!d(e,0,0,a,a/2)){var t=p(a),l=function(a,l,n,c){return e.clearRect(a*t,l*t,n*t,c*t)};l(40,0,8,8),l(48,0,8,8),l(32,8,8,8),l(40,8,8,8),l(48,8,8,8),l(56,8,8,8)}}(e,a),l(4,16,4,4,20,48,!0),l(8,16,4,4,24,48,!0),l(0,20,4,12,24,52,!0),l(4,20,4,12,20,52,!0),l(8,20,4,12,16,52,!0),l(12,20,4,12,28,52,!0),l(44,16,4,4,36,48,!0),l(48,16,4,4,40,48,!0),l(40,20,4,12,40,52,!0),l(44,20,4,12,36,52,!0),l(48,20,4,12,32,52,!0),l(52,20,4,12,44,52,!0)}function f(e,a,t){const l=e.getImageData(a,t,1,1);return 0===l.data[0]&&0===l.data[1]&&0===l.data[2]}function v(e){return new Promise(a=>{const t=new Image;t.src=e,t.onload=()=>{if(t.width!==t.height)return void a(!1);const e=document.createElement("canvas");!function(e,a){var t=!1;if(a.width!==a.height){if(a.width!==2*a.height)throw new Error("Bad skin size: "+a.width+"x"+a.height);t=!0}var l=e.getContext("2d");if(t){var n=a.width;e.width=n,e.height=n,l.clearRect(0,0,n,n),l.drawImage(a,0,0,n,n/2),b(l,n)}else e.width=a.width,e.height=a.height,l.clearRect(0,0,a.width,a.height),l.drawImage(a,0,0,e.width,e.height)}(e,t);const l=e.width/64,n=e.getContext("2d");if(n){for(let e=46*l;e<48*l;e+=1)for(let t=52*l;t<64*l;t+=1)if(!f(n,e,t))return void a(!1);a(!0)}else a(!1)}})}var h=t(126),g=t(75);const E=n.a.lazy(()=>Promise.all([t.e(1),t.e(2)]).then(t.bind(null,361))),w=document.createElement("div");a.default=Object(i.hot)(()=>{var e;const[a,t]=Object(l.useState)(""),[c,i]=Object(l.useState)("steve"),[d,p]=Object(l.useState)(!1),[b,f]=Object(l.useState)(!1),[N,j]=Object(l.useState)(null),[k,O]=Object(l.useState)(""),y=o("rule"),x=o("contentPolicy"),C=o("privacyNotice"),S=o("award"),I=o("scorePublic"),_=o("scorePrivate"),F=o("closetItemCost");Object(l.useEffect)(()=>{const e=document.querySelector("#previewer");return e.appendChild(w),()=>{e.removeChild(w)}},[]);const P=e=>{i(e.target.value)},R=d?_:I,D=(~~((null!==(e=null==N?void 0:N.size)&&void 0!==e?e:0)/1024)||1)*R+F;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"card card-primary"},n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"texture-name"},Object(s.a)("skinlib.upload.texture-name")),n.a.createElement("input",{className:"form-control",id:"texture-name",type:"text",placeholder:y,value:a,onChange:e=>{t(e.target.value)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,Object(s.a)("skinlib.upload.texture-type")),n.a.createElement("br",null),n.a.createElement("label",{className:"mr-4"},n.a.createElement("input",{type:"radio",className:"mr-1",name:"type",value:"steve",checked:"steve"===c,onChange:P}),"Steve"),n.a.createElement("label",{className:"mr-4"},n.a.createElement("input",{type:"radio",className:"mr-1",name:"type",value:"alex",checked:"alex"===c,onChange:P}),"Alex"),n.a.createElement("label",{className:"mr-4"},n.a.createElement("input",{type:"radio",className:"mr-1",name:"type",value:"cape",checked:"cape"===c,onChange:P}),Object(s.a)("general.cape"))),n.a.createElement(h.a,{file:N,accept:"image/png, image/x-png",onChange:async e=>{const l=e.target.files,[n]=l;if(n){j(n),!a&&n.name.endsWith(".png")&&t(n.name.slice(0,n.name.length-4));const e=URL.createObjectURL(n);O(e),"cape"!==c&&i(await v(e)?"alex":"steve")}}}),x&&n.a.createElement("div",{className:"callout callout-warning",dangerouslySetInnerHTML:{__html:x}})),n.a.createElement("div",{className:"card-footer"},n.a.createElement("div",{className:"container px-0 d-flex justify-content-between"},n.a.createElement("label",{className:"mt-2",htmlFor:"is-private",title:Object(s.a)("skinlib.upload.privacy-notice")},n.a.createElement("input",{type:"checkbox",id:"is-private",className:"mr-1",checked:d,onChange:e=>{p(e.target.checked)}}),Object(s.a)("skinlib.upload.set-as-private")),n.a.createElement("button",{className:"btn btn-success",disabled:b,onClick:async()=>{if(!N)return void u.b.error(Object(s.a)("skinlib.emptyUploadFile"));if(!a)return void u.b.error(Object(s.a)("skinlib.emptyTextureName"));if("image/png"!==N.type&&"image/x-png"!==N.type)return void u.b.error(Object(s.a)("skinlib.fileExtError"));const e=new FormData;e.append("name",a),e.append("type",c),e.append("file",N,N.name),e.append("public",(!d).toString()),f(!0);const{code:t,message:l,data:{tid:n}={tid:0}}=await m.c("/skinlib/upload",e);if(f(!1),0===t)window.location.href=`${blessing.base_url}/skinlib/show/${n}`;else if(2===t)try{await Object(u.a)({mode:"confirm",text:l,okButtonText:Object(s.a)("user.viewInSkinlib")}),window.location.href=`${blessing.base_url}/skinlib/show/${n}`}catch(e){}else u.b.error(l)}},b?n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fas fa-spinner fa-spin mr-1"}),n.a.createElement("span",null,Object(s.a)("skinlib.uploading"))):Object(s.a)("skinlib.upload.button"))),N&&n.a.createElement("div",{className:"callout callout-success mt-3"},n.a.createElement("p",null,Object(s.a)("skinlib.upload.cost",{score:D}))),d&&n.a.createElement("div",{className:"callout callout-info mt-3"},n.a.createElement("p",null,C)),!d&&S>0&&n.a.createElement("div",{className:"callout callout-success mt-3"},n.a.createElement("p",null,Object(s.a)("skinlib.upload.award",{score:S}))))),r.a.createPortal(n.a.createElement(n.a.Suspense,{fallback:n.a.createElement(g.a,null)},n.a.createElement(E,{skin:"cape"!==c?k:void 0,cape:"cape"===c?k:void 0,isAlex:"alex"===c})),w))})},51:function(e,a,t){a.hot=function(e){return e}},75:function(e,a,t){"use strict";var l=t(0),n=t.n(l),c=t(1);a.a=()=>n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("h3",{className:"card-title"},n.a.createElement("span",null,Object(c.b)("general.texturePreview"))))),n.a.createElement("div",{className:"card-body"}))}}]);